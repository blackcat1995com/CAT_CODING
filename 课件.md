## 上下按钮控件

Spin Control是一个“旋转按钮”控件，也叫做“上下控件”，是一对箭头按钮，用户通过点击箭头可以实现增加或减小一个值，一个旋转按钮控件通常与一个相伴的控件一起使用，叫做“伙伴窗口”或“自动合作者”。

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/56b34883c4f147e6949026fb885f79e2~tplv-obj.jpg?traceid=20230301101720F698379E86A656436E9F&x-expires=2147483647&x-signature=x%2FG9ZGp4DwqBGMQGLo6f0z6pHfE%3D)

编辑框ID：IDC_EDIT1~3

Spin控件ID：IDC_SPIN1~3，并绑定控件类型变量m_spinbtn_ctrl1~3。

没有进行编程时，默认上箭头数值减1，下箭头数值加1。

# 设置自动合作者

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/0aac705a11b2483cbf0fd152411c4005~tplv-obj.jpg?traceid=20230301101720F698379E86A656436E9F&x-expires=2147483647&x-signature=yZBQMMZ3POxoNp5PeeiTLBjom4Q%3D)

OnInitDialog()：

```cpp
m_spinbtn_ctrl1.SetRange(0, 100);
m_spinbtn_ctrl1.SetPos(20);
```

## 自定义绑定合作者

首先，也要设置合作者整数为True：

```cpp
m_spinbtn_ctrl2.SetBuddy(GetDlgItem(IDC_EDIT2));
m_spinbtn_ctrl2.SetRange(0, 100);
m_spinbtn_ctrl2.SetPos(30);
m_spinbtn_ctrl2.SetBase(16);
```

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/ccf2294289b34783946bd07cf9c0284d~tplv-obj.jpg?traceid=20230301101720F698379E86A656436E9F&x-expires=2147483647&x-signature=T%2FICTIq%2BUQDR8rkXTrGy3R5DK3Y%3D)

## 添加事件处理程序

![img](https://p3-sign.toutiaoimg.com/tos-cn-i-qvj2lq49k0/ae38f723458640f89ff0d1a46d015b58~tplv-obj.jpg?traceid=20230301101720F698379E86A656436E9F&x-expires=2147483647&x-signature=7Bs6WDvlGnynmBpEEb9fN69R6yk%3D)

OnInitDialog()：

```cpp
m_spinbtn_ctrl3.SetRange(-100, 100);
SetDlgItemInt(IDC_EDIT3, 30);
m_spinbtn_ctrl3.SetPos(30);
void CDemo2Dlg::OnDeltaposSpin3(NMHDR* pNMHDR, LRESULT* pResult)
{
	LPNMUPDOWN pNMUpDown = reinterpret_cast<LPNMUPDOWN>(pNMHDR);
	
	int v = GetDlgItemInt(IDC_EDIT3);

	if (pNMUpDown->iDelta == -1) v -= 10;
	else if (pNMUpDown->iDelta == 1) v += 10;

	SetDlgItemInt(IDC_EDIT3, v);

	*pResult = 0;
}
```

 